<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>stage1</title>
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Nanum+Myeongjo&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/MOONWrite.woff2" rel="stylesheet">
  <link rel="stylesheet" href="stage1.css">
</head>
<body>


  <div id="introOverlay">
  <div class="intro-text">ç¬¬ä¸€ç« </div>
</div>


<div id="mainUI" style="display: none;">
  <div class="container" id="gameContainer">
    <h1>ì‚¬ì´ë¹„ íƒ€ì ìˆ˜í–‰</h1>
    <div class="word" id="wordDisplay">íƒ€ìì—°ìŠµ</div>
    <input type="text" class="input" />
    <div class="score">0</div>
    <div class="time">9</div>
    <button class="btn">ê²Œì„ì‹œì‘</button>

    <!-- âœ… ì—¬ê¸°ë„ í¬í•¨ -->
    <div class="complete-text" style="display: none;">ğŸ‰ ëª¨ë“  ë¬¸ì¥ì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤! ğŸ‰</div>
    <a href="stage2.html" class="next-stage-link" style="display: none;">ë‹¤ìŒ ìŠ¤í…Œì´ì§€ë¡œ â†’</a>
  </div>
</div>

<script>
  const wordDisplay = document.getElementById('wordDisplay');
  const input = document.querySelector('.input');
  const title = document.querySelector('h1');
  const scoreDisplay = document.querySelector('.score');
  const timeDisplay = document.querySelector('.time');
  const button = document.querySelector('.btn');
  const main = document.getElementById("mainUI");

  const wordList = ["í•œê¸€ì€.", "ë‚˜ëŠ”.", "ë°”ëŒì´.", "ìë°”ìŠ¤í¬ë¦½", "í”„ë¡ íŠ¸ì—”ë“œ.", "ì§‘ì¤‘ë ¥ì„"];
  let currentIndex = 0, score = 0, time = 9, isPlaying = false, interval;

  button.addEventListener('click', () => {
    if (!isPlaying) startGame();
  });

  function startGame() {
    isPlaying = true;
    score = 0;
    time = 9;
    currentIndex = 0;
    scoreDisplay.textContent = score;
    input.disabled = false;
    input.value = "";
    input.style.display = "block";
    title.style.display = 'none';
    button.textContent = "ê²Œì„ ì¤‘...";
    wordDisplay.style.display = "block";
    scoreDisplay.style.display = "block";
    timeDisplay.style.display = "block";
    button.style.display = "block";
    document.querySelector('.complete-text').style.display = 'none';
    document.querySelector('.next-stage-link').style.display = 'none';
    showWord();
    input.focus();

    interval = setInterval(() => {
      if (time > 0) {
        time--;
        timeDisplay.textContent = time;
      } else {
        gameOver();
      }
    }, 1000);
  }

  function showWord() {
    if (currentIndex >= wordList.length) return gameClear();
    wordDisplay.textContent = wordList[currentIndex];
    time = 9;
    timeDisplay.textContent = time;
  }

  input.addEventListener('input', () => {
    if (!isPlaying) return;
    if (input.value.trim() === wordList[currentIndex]) {
      score++;
      scoreDisplay.textContent = score;
      input.value = "";
      currentIndex++;
      showWord();
    }
  });

  function gameOver() {
    isPlaying = false;
    clearInterval(interval);
    wordDisplay.textContent = "â›” ì‹œê°„ ì´ˆê³¼!";
    input.disabled = true;
    button.textContent = "ê²Œì„ ì‹œì‘";
  }

  function gameClear() {
    isPlaying = false;
    clearInterval(interval);
    wordDisplay.style.display = 'none';
    input.style.display = 'none';
    scoreDisplay.style.display = 'none';
    timeDisplay.style.display = 'none';
    button.style.display = 'none';
    document.querySelector('.complete-text').style.display = 'block';
    document.querySelector('.next-stage-link').style.display = 'inline-block';


  }

window.onload = () => {
  // ì¼ë‹¨ ì¸íŠ¸ë¡œë§Œ ë³´ì—¬ì¤˜ì•¼ í•˜ë‹ˆê¹Œ mainUI ìˆ¨ê¹€
  document.getElementById("mainUI").style.display = "none";
  document.querySelector('.complete-text').style.display = 'none';
  document.querySelector('.next-stage-link').style.display = 'none';

  // 3ì´ˆ í›„ì— ì¸íŠ¸ë¡œ ì‚¬ë¼ì§€ê³  ê²Œì„ UI ë“±ì¥
  setTimeout(() => {
    document.getElementById("introOverlay").style.display = "none";
    document.getElementById("mainUI").style.display = "block";
  }, 3000);
};
</script>
</body>
</html>
