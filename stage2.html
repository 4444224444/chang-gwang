 <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="stage2.css">

  </head>
  <body>
     <div class="dark-mask"></div>
     <div id="highlight"></div>


     <div id="introOverlay">
  <div class="intro-text">ç¬¬äºŒç« </div>
</div>




<div id="mainUI">
     <div id="message"></div>
    <div id="timeBarContainer">
        <div id="timeBar"></div>
        </div>

      <div class="BtnContainer">
    <button class="Btn" id="StartBtn">ì‹œì‘</button>
    <button class="Btn" id="GameExplanationBtn">ì„¤ëª…</button>
      </div>
</div>

<div class="modal" id="modal">
    <p id="modalText"></p>
    <button class="btn-close" id="closeBtn">x</button>
</div>

  <button id="suspectBtn">ì´ê±´ ì´ìƒí•˜ì§€ ì•Šë‚˜ìš”?</button>
</div>
  



<div id="awakeningOverlay" style="display: none;">
  <div id="awakeningText">
    <p>ë‹¹ì‹ ì€ ê´€ì°°ë‹¹í•´ ì™”ìŠµë‹ˆë‹¤.</p>
    <p>ì´ê±´ ì‹ ì´ ì•„ë‹™ë‹ˆë‹¤.</p>
    <p>ê¹¨ë‹¬ì•˜ë‹¤ë©´, ì§€ê¸ˆ ë„ë§ì¹˜ì„¸ìš”.</p>
    <div class="choiceButtons">
      <button id="escapeBtn">[ ê¹¨ë‹«ëŠ”ë‹¤ ]</button>
      <button id="ignoreBtn">[ ë¬´ì‹œí•œë‹¤ ]</button>
    </div>
  </div>
</div>

  <script>
    let StartBtn = document.querySelector('#StartBtn');
    let isStartClickable = true;
    let GameExplanationBtn = document.querySelector('#GameExplanationBtn');

    let message = document.getElementById('message');
    let modal = document.getElementById('modal');
    let modalText = document.getElementById('modalText');
    let closeBtn = document.getElementById('closeBtn');

    let activeImages = 0;
    let timer = null;

  StartBtn.addEventListener('click', () => {
  if (!isStartClickable) return;
  isStartClickable = false;

  message.innerText = "";
  clearTimeout(timer);
  activeImages = 0;
  let imgs = [];

  // â° íƒ€ì´ë¨¸ë°” ì´ˆê¸°í™”
  const timeBar = document.getElementById('timeBar');
  let totalTime = 15;
  let remainingTime = totalTime;
  timeBar.style.width = '100%';

  // ê¸°ì¡´ ì´ë¯¸ì§€ ëœë¤ ë°°ì¹˜
  for (let i = 0; i < 5; i++) {
    let img = document.createElement('img');
    img.src = 'assets/images/foot.png';
    img.style.position = "absolute";

    let x = Math.floor(Math.random() * (window.innerWidth - 150));
    let y = Math.floor(Math.random() * (window.innerHeight - 150));

    img.style.left = `${x}px`;
    img.style.top = `${y}px`;

    let click = 0;
    let opacity = 1;
    activeImages++;

    img.addEventListener('click', () => {
      click++;
      opacity -= 0.1;
      img.style.opacity = opacity;

      if (click >= 10) {
        img.remove();
        activeImages--;
        if (activeImages === 0) {
          clearInterval(interval);
          timeBar.style.width = '0%';
          if (!blockMessage) message.innerText = "ì„±ê³µë©”ì„¸ì§€";
        }
      }
    });

    document.body.appendChild(img);
    imgs.push(img);
  }

  // â³ íƒ€ì„ë°” ì• ë‹ˆë©”ì´ì…˜
interval = setInterval(() => {
  if (remainingTime > 0) {
    remainingTime--;
    timeBar.style.width = `${(remainingTime / totalTime) * 100}%`;
  } else {
    clearInterval(interval);
    imgs.forEach(img => img.remove());
    timeBar.style.width = '0%';
    activeImages = 0;

    // ğŸ”¥ blockMessage ë¬´ì‹œí•˜ê³  ë¬´ì¡°ê±´ ë©”ì„¸ì§€ ë„ì›€
    if (!document.getElementById('awakeningOverlay').style.display.includes('flex')) {
      message.innerText = "ë‹¤ì‹œì‹ ì•™ì‹¬ìŒ“ìœ¼ë¼ëŠ”ë©”ì„¸ì§€";
      message.style.display = 'block'; // í˜¹ì‹œ ìˆ¨ê²¨ì ¸ ìˆì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ ê°•ì œë¡œ í‘œì‹œ
    }
  }
}, 1000);
});



    GameExplanationBtn.addEventListener('click', () => {
      modal.classList.add('active');
      modalText.textContent = 'ì°½ê´‘ ê²Œì„ ì„¤ëª…';
    });

    closeBtn.addEventListener('click', () => {
      modal.classList.remove('active');
    });

     const highlight = document.getElementById('highlight');
document.addEventListener('mousemove', (e) => {
  highlight.style.left = `${e.pageX}px`;
  highlight.style.top = `${e.pageY}px`;
});

window.onload = () => {
  // ì¸íŠ¸ë¡œë§Œ ë¨¼ì € ë³´ì—¬ì£¼ê³  UI ìˆ¨ê¸°ê¸°
  document.getElementById("mainUI").style.display = "none";

  // 3ì´ˆ í›„ ì¸íŠ¸ë¡œ ì œê±° + ì „ì²´ UI ë³´ì´ê²Œ
  setTimeout(() => {
    document.getElementById("introOverlay").style.display = "none";
    document.getElementById("mainUI").style.display = "block";

    // ë§Œì•½ íš¨ê³¼ ì£¼ê³  ì‹¶ë‹¤ë©´ ì—¬ê¸°ì„œ í˜ì´ë“œ ì¸ ë„£ì–´ë„ ë¨
  }, 3000);
};

suspectBtn.addEventListener('click', () => {
  blockMessage = true;
  suspectBtn.style.display = 'none';

  const targets = [
    document.getElementById('StartBtn'),
    document.getElementById('GameExplanationBtn'),
    document.getElementById('message'),
    ...document.querySelectorAll('img'),
  ];

  targets.forEach((el, i) => {
    setTimeout(() => {
      if (el) {
        el.style.transition = 'all 0.8s ease';
        el.style.opacity = '0';
        el.style.transform = 'scale(1.3)';
        setTimeout(() => {
          el.style.display = 'none';
        }, 800);
      }
    }, i * 300);
  });

  // í•„í„° ë° ê¹¨ë‹¬ìŒ ì—°ì¶œ
  setTimeout(() => {
    document.body.style.filter = 'contrast(2) grayscale(1) blur(1px)';
    document.body.style.transition = '0.8s ease';

    // ê¹¨ë‹¬ìŒ í…ìŠ¤íŠ¸ ë“±ì¥
    document.getElementById('awakeningOverlay').style.display = 'flex';
  }, targets.length * 300 + 1000);
});

document.getElementById('ignoreBtn').addEventListener('click', () => {
  alert("ì‹ ì•™ì‹¬ì„ ë‹¤ì‹œ ë‹¤ì¡ì•˜ìŠµë‹ˆë‹¤.");
  window.location.href = 'stage2.html'; // â† ë„ˆê°€ ì›í•˜ëŠ” ê²½ë¡œë¡œ ìˆ˜ì • ê°€ëŠ¥
});

document.getElementById('escapeBtn').addEventListener('click', () => {
  alert("ê¹¨ë‹¬ì•˜ë‹¤ë©´ ë„ë§ê°€ì„¸ìš”! ê¸°íšŒëŠ” í•œ ë²ˆì…ë‹ˆë‹¤!");
  window.location.href = 'escape.html'; // â† ë„ˆê°€ ì›í•˜ëŠ” ê²½ë¡œë¡œ ìˆ˜ì • ê°€ëŠ¥
});
  </script>



  </body>
  </html>


